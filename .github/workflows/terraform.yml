name: 'Terraform'

on:
  
  push:
    branches: [ "master" ]
  # pull_request:
  #   branches: [ "main" ]

env:
  name: Terraform
  
  
jobs:
  terraform:
    name: 'Terraform'
    runs-on: ubuntu-latest

    steps:
      - name: Setup AWS Credentials
        uses: aws-action/configure-aws-credentials@v1
        with:     
          
          AWS_Access_Key_Id : ${{ secrets.AWS_Access_Key_Id}}
          AWS_Secret_access_key:  ${{ secrets.AWS_Secret_access_key}}
          AWS_session_token: ${{ secrets.AWS_session_token}}
          AWS_Region: us-east-1

      - name: Terraform Init
        run: terraform init
    
      - name: Terraform Plan
        run: terraform plan

      - name: Terraform apply
        run: terraform apply -auto-approve


          

